import React, { useMemo, useState } from "react";\nimport { View, Text, StyleSheet, Pressable } from "react-native";\n\nimport { Screen } from "../../components/Screen";\nimport { Card } from "../../components/Card";\nimport { TextField } from "../../components/TextField";\nimport { Button } from "../../components/Button";\nimport { useTheme } from "../../theme";\nimport { useAppActions } from "../../store/AppStore";\n\nconst ROLE_OPTIONS = ["ADMIN", "CLIENT"];\nconst WORKSPACE_OPTIONS = [\n  { id: "ws_acme", name: "Acme Ops" },\n  { id: "ws_beta", name: "Beta Holdings" },\n];\n\nexport function RegisterScreen({ navigation }) {\n  const actions = useAppActions();\n  const theme = useTheme();\n  const styles = useMemo(() => makeStyles(theme), [theme]);\n\n  const [workspaceId, setWorkspaceId] = useState("ws_acme");\n  const [roleIndex, setRoleIndex] = useState(0);\n  const role = useMemo(() => ROLE_OPTIONS[roleIndex], [roleIndex]);\n\n  const [fullName, setFullName] = useState("New User");\n  const [email, setEmail] = useState("newuser@acme.com");\n  const [phone, setPhone] = useState("");\n  const [password, setPassword] = useState("password");\n  const [loading, setLoading] = useState(false);\n\n  async function onRegister() {\n    setLoading(true);\n    await actions.safeCall(async () => {\n      await actions.register({ workspaceId, role, fullName, email, phone, password });\n    }, { title: "Registration failed" });\n    setLoading(false);\n  }\n\n  return (\n    <Screen>\n      <View style={styles.container}>\n        <Text style={styles.title}>Create account</Text>\n        <Text style={styles.subtitle}>Mock registration (no email verification)</Text>\n\n        <Card style={styles.card}>\n          <View style={styles.row}>\n            {WORKSPACE_OPTIONS.map((w) => (\n              <Pressable\n                key={w.id}\n                onPress={() => setWorkspaceId(w.id)}\n                style={[styles.pill, workspaceId === w.id ? styles.pillActive : null]}\n              >\n                <Text style={[styles.pillText, workspaceId === w.id ? styles.pillTextActive : null]}>{w.name}</Text>\n              </Pressable>\n            ))}\n          </View>\n\n          <View style={styles.row}>\n            {ROLE_OPTIONS.map((r, idx) => (\n              <Pressable key={r} onPress={() => setRoleIndex(idx)} style={[styles.pill, roleIndex === idx ? styles.pillActive : null]}>\n                <Text style={[styles.pillText, roleIndex === idx ? styles.pillTextActive : null]}>{r}</Text>\n              </Pressable>\n            ))}\n          </View>\n\n          <TextField label="Full name" value={fullName} onChangeText={setFullName} placeholder="Full name" />\n          <TextField label="Email" value={email} onChangeText={setEmail} placeholder="you@company.com" />\n          <TextField label="Phone (optional)" value={phone} onChangeText={setPhone} placeholder="+1 ..." />\n          <TextField label="Password" value={password} onChangeText={setPassword} placeholder="••••••••" secureTextEntry />\n\n          <Button title="Create account" onPress={onRegister} loading={loading} />\n\n          <View style={styles.links}>\n            <Pressable onPress={() => navigation.goBack()}>\n              <Text style={styles.link}>Back to login</Text>\n            </Pressable>\n          </View>\n        </Card>\n      </View>\n    </Screen>\n  );\n}\n\nfunction makeStyles(theme) {\n  return StyleSheet.create({\n    container: {\n      flex: 1,\n      paddingHorizontal: theme.spacing.xl,\n      paddingTop: theme.spacing.xl,\n    },\n    title: {\n      ...theme.typography.h1,\n      color: theme.colors.text,\n    },\n    subtitle: {\n      ...theme.typography.small,\n      color: theme.colors.mutedText,\n      marginTop: 6,\n      marginBottom: theme.spacing.lg,\n    },\n    card: {\n      padding: theme.spacing.xl,\n    },\n    row: {\n      flexDirection: "row",\n      gap: theme.spacing.sm,\n      marginBottom: theme.spacing.md,\n      flexWrap: "wrap",\n    },\n    pill: {\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      backgroundColor: theme.colors.surface,\n      borderRadius: theme.radius.pill,\n      paddingVertical: 8,\n      paddingHorizontal: 12,\n    },\n    pillActive: {\n      borderColor: theme.colors.primary,\n      backgroundColor: theme.colors.chipBg,\n    },\n    pillText: {\n      ...theme.typography.small,\n      color: theme.colors.text,\n      fontWeight: "700",\n    },\n    pillTextActive: {\n      color: theme.colors.primary,\n    },\n    links: {\n      marginTop: theme.spacing.md,\n      alignItems: "center",\n    },\n    link: {\n      color: theme.colors.primary,\n      ...theme.typography.small,\n      fontWeight: "700",\n    },\n  });\n}\n